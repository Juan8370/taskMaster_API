/* Dark, rounded theme with improved UX/UI */
* { box-sizing: border-box; font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif }
:root {
	--bg:#0f1720;
	--panel:#0b1220;
	--muted:#9aa4b2;
	--accent:#7c3aed; /* purple */
	--accent-2:#4f46e5; /* indigo */
	--card:#0b1226;
	--success:#16a34a;
	--danger:#ef4444;
	--text:#e6eef6;
	--border: rgba(255,255,255,0.06);
	--border-2: rgba(255,255,255,0.1);
}

html, body { height: 100% }
body { background: linear-gradient(180deg, var(--bg), #071120); color: var(--text); margin: 0; line-height: 1.5; font-size: clamp(14px, 1.6vw, 16px) }

.container { max-width: 920px; margin: 28px auto; padding: 20px }

header { display: flex; justify-content: space-between; align-items: center; gap: 12px; padding-bottom: 8px }
header h1 { margin: 0; font-size: clamp(1.25rem, 2.5vw, 1.6rem); letter-spacing: .2px }
header .actions { display: flex; gap: 8px; flex-wrap: wrap }

.hidden { display: none }
.muted { color: var(--muted) }

/* Cards and auth layout */
.auth-container { display: flex; flex-direction: column; min-height: 100vh; justify-content: center; align-items: center; max-width: 440px; margin: 0 auto; padding: 24px 16px; gap: 16px }
.auth-container > header { display: block; text-align: center; margin-bottom: 6px }
.auth-container > main { width: 100% }
.card { width: 100%; background: linear-gradient(180deg, #0c162a, #0a1324); border: 1px solid rgba(255,255,255,0.16); border-radius: 16px; padding: 20px; box-shadow: 0 24px 70px rgba(2,6,23,0.55); backdrop-filter: blur(2px) }
.card label { display: block; font-weight: 600; margin: 10px 0 6px; color: #dbe5f0 }
.card input { width: 100%; padding: 12px 12px; border-radius: 10px; border: 1px solid var(--border); background: #0a1424; color: #dbe5f0 }
.card input::placeholder { color: #8aa0b6 }
.card input:focus { outline: none; border-color: var(--accent-2); box-shadow: 0 0 0 3px rgba(79,70,229,0.25) }

/* Forms and controls */
.controls { display: flex; gap: 8px; margin: 12px 0; align-items: center; flex-wrap: wrap }

/* Buttons */
button { padding: 10px 14px; border-radius: 12px; border: 1px solid var(--border); background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); color: var(--text); cursor: pointer; transition: transform .12s ease, box-shadow .2s ease, background .2s ease }
button:hover { transform: translateY(-1px); box-shadow: 0 10px 24px rgba(15,23,32,0.45) }
button:active { transform: translateY(0) }
button:disabled { opacity: .6; cursor: not-allowed; filter: grayscale(.1) }

.secondary { background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01)); border-color: var(--border) }
.danger { background: linear-gradient(180deg, rgba(239,68,68,0.14), rgba(239,68,68,0.08)); border-color: rgba(239,68,68,0.25) }
.danger:hover { box-shadow: 0 10px 24px rgba(239,68,68,.25) }
button:focus-visible { outline: none; border-color: var(--accent-2); box-shadow: 0 0 0 3px rgba(79,70,229,0.25) }
.primary { background: linear-gradient(180deg, rgba(124,58,237,0.18), rgba(124,58,237,0.1)); border-color: rgba(124,58,237,0.35) }
.primary:hover { box-shadow: 0 10px 24px rgba(124,58,237,.3) }

/* Button loader */
.btn-loading { position: relative; pointer-events: none }
.btn-loading .spinner { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); width: 16px; height: 16px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.35); border-top-color: #fff; animation: spin .8s linear infinite }
@keyframes spin { to { transform: translateY(-50%) rotate(360deg) } }

/* Notes list */
#notes-list { list-style: none; padding: 0; margin-top: 8px }
#notes-list li { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border: 1px solid rgba(255,255,255,0.04); padding: 12px; margin-bottom: 10px; border-radius: 14px; display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 12px; overflow: hidden }
#notes-list li .title { font-weight: 600; color: #f8fafc; white-space: pre-wrap; line-height: 1.4; max-width: 68ch; display: block; overflow: hidden; max-height: 3.9em; /* ~2.8 lines */ mask-image: linear-gradient(180deg, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%); -webkit-mask-image: linear-gradient(180deg, rgba(0,0,0,1) 70%, rgba(0,0,0,0) 100%) }
#notes-list li.expanded .title { max-height: none; mask-image: none; -webkit-mask-image: none; max-width: none }
#notes-list li .note-actions { display: flex; align-items: center; gap: 8px }
.link { background: transparent; border: none; color: var(--accent-2); padding: 0 2px; box-shadow: none }
.link:hover { text-decoration: underline; transform: none }
#notes-list li .meta { color: var(--muted); font-size: .9rem }

/* Modal */
.modal { position: fixed; inset: 0; background: rgba(2,6,23,0.6); display: flex; align-items: center; justify-content: center; z-index: 40; transition: opacity 220ms ease-out; backdrop-filter: blur(2px) }
.modal.hidden { opacity: 0; pointer-events: none }
.modal.closing { opacity: 0 }
.modal .modal-content { background: linear-gradient(180deg, #071127, #081426); padding: 18px; border-radius: 16px; min-width: 320px; width: min(96vw, 560px); border: 1px solid rgba(255,255,255,0.06); box-shadow: 0 18px 50px rgba(2,6,23,0.6); transform: scale(.96); opacity: 0; transition: all 220ms cubic-bezier(.2,.9,.2,1) }
.modal.open .modal-content { transform: scale(1); opacity: 1 }
.modal.closing .modal-content { transform: scale(.96); opacity: 0 }
.modal .modal-content input, .modal .modal-content textarea { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid var(--border); background: #0a1424; color: #dbe5f0 }
.modal .modal-content textarea { min-height: 120px; resize: vertical }
.modal .modal-content input:focus, .modal .modal-content textarea:focus { outline: none; border-color: var(--accent-2); box-shadow: 0 0 0 3px rgba(79,70,229,0.25) }
.modal-actions { display: flex; gap: 8px; justify-content: flex-end; margin-top: 12px }

.empty { color: var(--muted); text-align: center; padding: 18px }
footer { margin-top: 24px; color: var(--muted) }

/* Toasts */
.toasts, #toast-container { position: fixed; right: calc(16px + env(safe-area-inset-right)); bottom: calc(16px + env(safe-area-inset-bottom)); display: flex; flex-direction: column; gap: 10px; z-index: 60 }
.toast { background: #07121a; color: #e6eef6; padding: 10px 14px; border-radius: 12px; box-shadow: 0 8px 30px rgba(2,6,23,0.6); border-left: 4px solid var(--accent); opacity: 0; transform: translateY(8px); animation: toast-in 300ms forwards }
.toast.info { border-left-color: var(--accent) }
.toast.success { border-left-color: var(--success) }
.toast.error { border-left-color: var(--danger) }
@keyframes toast-in { to { opacity: 1; transform: none } }

/* Loading skeletons */
.loading-skeleton, .skeleton { background: linear-gradient(90deg, rgba(255,255,255,0.02) 25%, rgba(255,255,255,0.04) 50%, rgba(255,255,255,0.02) 75%); background-size: 200% 100%; animation: shimmer 1.2s linear infinite; border-radius: 12px; height: 52px; margin-bottom: 10px }
@keyframes shimmer { 0% { background-position: 200% 0 } 100% { background-position: -200% 0 } }

/* Pagination */
.pagination-controls { display: flex; align-items: center; gap: 8px; margin-left: 8px }
.pagination-controls select { padding: 6px 8px; border-radius: 10px; background: #0a1424; border: 1px solid var(--border); color: var(--muted) }

/* Responsive: tablets */
@media (max-width: 900px) {
	.container { padding: 16px }
	header { flex-wrap: wrap }
	#notes-list li { grid-template-columns: 1fr; align-items: flex-start }
	#notes-list li .note-actions { justify-content: flex-end }
}

/* Responsive: phones */
@media (max-width: 640px) {
	.container { padding: 12px }
	header { flex-direction: column; align-items: flex-start; gap: 12px }
	header .actions { width: 100%; gap: 6px }
	header .actions button { flex: 1 }
	.controls { gap: 6px }
	.pagination-controls { width: 100%; justify-content: space-between; gap: 6px; flex-wrap: wrap }
	.pagination-controls select { flex: 1 }
	#notes-list li { grid-template-columns: 1fr; }
}

/* Responsive: small phones */
@media (max-width: 420px) {
	header h1 { font-size: 1.2rem }
	button { padding: 10px 12px }
	.card { padding: 16px }
}

/* Reduced motion accessibility */
@media (prefers-reduced-motion: reduce) {
	* { transition: none !important; animation-duration: 0.001s !important }
}
